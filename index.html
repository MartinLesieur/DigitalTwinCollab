<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Jumeau Num√©rique NOVAPARC par DigitalTwinCollab">
    <title>DigitalTwinCollab - Solutions de Jumeaux Num√©riques</title>
    <style>
        :root {
            /* Couleurs de l'App NOVAPARC */
            --primary-green: #2ecc71;
            --dark-green: #27ae60;
            --primary-blue: #3498db;
            --dark-blue: #2980b9;
            --navy-blue: #2c3e50;
            --accent-orange: #e67e22;
            --purple: #9b59b6;
            --light-bg: #f4f7f6;
            --white: #ffffff;
            --text-color: #333;
            --card-shadow: 0 4px 6px rgba(0,0,0,0.05);
            --border-radius: 12px;

            /* Couleurs de la Pr√©sentation DigitalTwinCollab */
            --dt-bg: #0f172a;
            --dt-text: #f8fafc;
            --dt-accent: #38bdf8;
            --dt-secondary: #1e293b;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        
        body { 
            background-color: var(--light-bg); 
            color: var(--text-color); 
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* =========================================
           STYLES DE LA PAGE DE PR√âSENTATION
           ========================================= */
        #presentation-view {
            background-color: var(--dt-bg);
            color: var(--dt-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 200; /* Au-dessus de l'app */
        }

        .dt-nav {
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .dt-logo {
            font-size: 1.8rem;
            font-weight: bold;
            background: linear-gradient(90deg, #fff, var(--dt-accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .dt-hero {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 60px 20px;
            background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
        }

        .dt-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            max-width: 800px;
            line-height: 1.2;
        }

        .dt-hero p {
            font-size: 1.2rem;
            color: #94a3b8;
            max-width: 600px;
            margin-bottom: 40px;
        }

        .dt-btn {
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--dt-bg);
            background: var(--dt-accent);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 0 20px rgba(56, 189, 248, 0.4);
        }

        .dt-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(56, 189, 248, 0.6);
            background: #fff;
        }

        .dt-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            padding: 60px 40px;
            background: var(--dt-secondary);
        }

        .dt-card {
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.3s;
        }

        .dt-card:hover {
            transform: translateY(-10px);
            border-color: var(--dt-accent);
        }

        .dt-icon {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--dt-accent);
        }

        .dt-footer {
            padding: 20px;
            text-align: center;
            color: #64748b;
            font-size: 0.9rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* =========================================
           STYLES DE L'APP (MODIFI√âS POUR L'INT√âGRATION)
           ========================================= */
        #app-view {
            display: none; /* Cach√© par d√©faut */
            flex-direction: column;
            min-height: 100vh;
            animation: fadeInApp 0.5s ease-out;
        }

        @keyframes fadeInApp {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }

        /* --- HEADER --- */
        header {
            background: linear-gradient(135deg, var(--navy-blue) 0%, var(--dark-blue) 100%);
            color: var(--white);
            padding: 1rem 2rem;
            display: flex; justify-content: space-between; align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: sticky; top: 0; z-index: 100;
        }
        .logo { font-size: 1.5rem; font-weight: bold; display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .logo span { color: var(--primary-green); }
        .user-profile { display: flex; align-items: center; gap: 15px; cursor: pointer; }
        
        .user-info-desktop {
            text-align: right;
            display: none;
        }
        @media(min-width: 600px) {
            .user-info-desktop { display: block; }
        }

        .avatar { width: 40px; height: 40px; background-color: var(--primary-green); border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: bold; }

        /* --- NAVIGATION --- */
        nav { background-color: var(--white); padding: 0 2rem; border-bottom: 1px solid #ddd; overflow-x: auto; position: sticky; top: 70px; z-index: 90; }
        nav::-webkit-scrollbar { height: 0px; background: transparent; }
        .nav-links { display: flex; gap: 30px; list-style: none; min-width: max-content; }
        .nav-links li {
            cursor: pointer; padding: 15px 5px; border-bottom: 3px solid transparent;
            transition: all 0.3s; font-weight: 600; color: #7f8c8d; white-space: nowrap;
        }
        .nav-links li:hover { color: var(--primary-blue); }
        .nav-links li.active { color: var(--primary-blue); border-bottom-color: var(--primary-blue); }

        /* --- MAIN LAYOUT --- */
        main { flex: 1; padding: 2rem; max-width: 1400px; margin: 0 auto; width: 100%; }
        
        .view-section { display: none; animation: fadeIn 0.4s ease; }
        .view-section.active { display: grid; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Grid Systems */
        .grid-dashboard { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .grid-energy { grid-template-columns: 2fr 1fr; gap: 20px; }
        .grid-circular { grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
        .grid-kpi { grid-template-columns: 1fr 1fr; gap: 20px; }
        
        @media (max-width: 900px) {
            .grid-energy, .grid-circular, .grid-kpi { grid-template-columns: 1fr; }
        }

        /* --- CARDS & WIDGETS --- */
        .card {
            background: var(--white); border-radius: var(--border-radius); padding: 25px;
            box-shadow: var(--card-shadow); position: relative; overflow: hidden; display: flex; flex-direction: column;
        }
        .card h3 { margin-bottom: 20px; color: var(--navy-blue); display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .card-icon { font-size: 1.2rem; padding: 8px; border-radius: 8px; background: #f0f2f5; }

        /* --- SPECIFIC STYLES --- */
        
        /* Energy Page */
        .energy-stat-row { display: flex; justify-content: space-around; margin-bottom: 20px; text-align: center; }
        .energy-big-number { font-size: 2.5rem; font-weight: bold; color: var(--navy-blue); }
        .energy-label { font-size: 0.9rem; color: #7f8c8d; text-transform: uppercase; letter-spacing: 1px; }
        .graph-placeholder { width: 100%; height: 250px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: flex-end; justify-content: space-around; padding: 10px; position: relative; }
        .graph-line { position: absolute; top: 50%; left: 0; width: 100%; height: 2px; background: #ddd; border-top: 2px dashed #999; }
        
        /* KPI Page Specifics */
        .kpi-highlight { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .kpi-value { font-size: 2rem; font-weight: bold; color: var(--primary-green); }
        .kpi-sub { font-size: 0.9rem; color: #666; }
        .progress-bar-container { background: #eee; border-radius: 10px; height: 10px; width: 100%; margin-top: 5px; overflow: hidden; }
        .progress-bar-fill { height: 100%; background: var(--primary-green); border-radius: 10px; transition: width 1s ease; }
        
        .bar-chart { display: flex; align-items: flex-end; justify-content: space-between; height: 200px; padding-top: 20px; gap: 10px; }
        .bar-group { display: flex; flex-direction: column; align-items: center; flex: 1; }
        .bar { width: 100%; border-radius: 4px 4px 0 0; position: relative; transition: height 0.5s ease; }
        .bar-label { font-size: 0.8rem; color: #7f8c8d; margin-top: 5px; }
        .bar-value { position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 0.8rem; font-weight: bold; }

        .roi-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .roi-table th { text-align: left; padding: 10px; border-bottom: 2px solid #eee; color: var(--navy-blue); font-size: 0.9rem; }
        .roi-table td { padding: 10px; border-bottom: 1px solid #eee; font-size: 0.9rem; }
        .roi-positive { color: var(--primary-green); font-weight: bold; }

        /* Circular Economy Page */
        .listing-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; }
        .listing-tag { padding: 4px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: bold; }
        .tag-give { background: rgba(46, 204, 113, 0.15); color: var(--dark-green); }
        .tag-sell { background: rgba(52, 152, 219, 0.15); color: var(--primary-blue); }
        .waste-meter { height: 20px; background: #eee; border-radius: 10px; margin: 10px 0; overflow: hidden; }
        .waste-fill { height: 100%; background: linear-gradient(90deg, var(--primary-green), var(--primary-blue)); width: 65%; }

        /* Mobility Page */
        .map-full { height: 400px; background: #e9ecef; border-radius: var(--border-radius); position: relative; background-image: radial-gradient(#bdc3c7 1px, transparent 1px); background-size: 20px 20px; }
        .transport-mode { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer; transition: 0.2s; }
        .transport-mode:hover { background: #eef2f7; }
        .battery-level { width: 40px; height: 8px; background: #ddd; border-radius: 2px; overflow: hidden; }
        .battery-fill { height: 100%; background: var(--primary-green); }

        /* B2B Community Page */
        .news-feed { display: flex; flex-direction: column; gap: 15px; }
        .news-item { display: flex; gap: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .news-date { min-width: 60px; text-align: center; font-weight: bold; color: var(--primary-blue); }
        .job-card { background: var(--light-bg); padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid var(--primary-blue); }

        /* Food & Garden Page */
        .menu-card { border: 1px solid #eee; border-radius: 8px; padding: 15px; margin-bottom: 15px; display: flex; gap: 15px; align-items: center; }
        .menu-img { width: 80px; height: 80px; background: #ddd; border-radius: 8px; object-fit: cover; display: flex; align-items: center; justify-content: center; font-size: 2rem; }
        .sensor-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        .sensor-box { background: #f0f8ff; padding: 15px; border-radius: 8px; text-align: center; }
        .sensor-val { font-size: 1.5rem; font-weight: bold; color: var(--dark-blue); }

        /* Partnerships Page */
        .coupon-card { display: flex; gap: 15px; border: 1px dashed var(--primary-blue); border-radius: 8px; padding: 15px; margin-bottom: 15px; background: #fbfdff; transition: 0.2s; }
        .coupon-card:hover { transform: translateX(5px); border-color: var(--dark-blue); }
        .discount-badge { background: var(--primary-blue); color: white; font-weight: bold; padding: 10px; border-radius: 6px; display: flex; align-items: center; justify-content: center; min-width: 70px; font-size: 1.2rem; }
        .gift-card-visual { background: linear-gradient(135deg, var(--purple), #8e44ad); color: white; padding: 20px; border-radius: 10px; margin-bottom: 15px; position: relative; overflow: hidden; box-shadow: 0 4px 10px rgba(155, 89, 182, 0.3); }
        .gift-card-visual::after { content: 'üéÅ'; position: absolute; font-size: 6rem; right: -20px; bottom: -20px; opacity: 0.2; transform: rotate(-20deg); }

        /* Buttons */
        .btn { padding: 10px 20px; border-radius: 6px; border: none; cursor: pointer; font-weight: 600; transition: 0.2s; width: 100%; margin-top: auto; }
        .btn-primary { background: var(--primary-blue); color: white; }
        .btn-primary:hover { background: var(--dark-blue); }
        .btn-outline { background: transparent; border: 2px solid var(--primary-blue); color: var(--primary-blue); }
        .btn-outline:hover { background: rgba(52, 152, 219, 0.1); }
        .btn-danger { background: transparent; border: 2px solid #e74c3c; color: #e74c3c; }
        .btn-danger:hover { background: rgba(231, 76, 60, 0.1); }
        .btn-purple { background: var(--purple); color: white; }
        .btn-purple:hover { background: #8e44ad; }

        /* --- MODAL SYSTEM --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 1000;
            display: none; justify-content: center; align-items: center;
            backdrop-filter: blur(3px);
        }
        .modal-content {
            background: white; padding: 30px; border-radius: 12px;
            width: 90%; max-width: 500px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            animation: slideUp 0.3s ease;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .modal-header { font-size: 1.5rem; font-weight: bold; margin-bottom: 15px; color: var(--navy-blue); }
        .modal-body { margin-bottom: 20px; color: #555; line-height: 1.5; }
        .modal-actions { display: flex; gap: 10px; justify-content: flex-end; }
        .modal-btn { padding: 8px 16px; border-radius: 6px; border: none; cursor: pointer; font-weight: 600; }
        .modal-btn-close { background: #eee; color: #333; }
        .modal-btn-confirm { background: var(--primary-green); color: white; }

    </style>
</head>
<body>

    <!-- ==================== VUE 1 : PR√âSENTATION (LANDING PAGE) ==================== -->
    <section id="presentation-view">
        <nav class="dt-nav">
            <div class="dt-logo">DigitalTwin<span>Collab</span></div>
            <button class="dt-btn" onclick="enterApp()" style="padding: 10px 20px; font-size: 0.9rem;">Connexion</button>
        </nav>

        <div class="dt-hero">
            <h1>Donnez vie √† vos infrastructures</h1>
            <p>DigitalTwinCollab transforme vos parcs industriels en √©cosyst√®mes intelligents, durables et collaboratifs gr√¢ce √† la technologie du Jumeau Num√©rique.</p>
            <button class="dt-btn" onclick="enterApp()">Acc√©der √† la D√©mo NOVAPARC</button>
        </div>

        <div class="dt-features">
            <div class="dt-card">
                <div class="dt-icon">‚ö°</div>
                <h3>Efficacit√© √ânerg√©tique</h3>
                <p style="color: #94a3b8;">Surveillez la consommation en temps r√©el, optimisez les flux et r√©duisez votre empreinte carbone gr√¢ce √† nos algorithmes IA.</p>
            </div>
            <div class="dt-card">
                <div class="dt-icon">ü§ù</div>
                <h3>Collaboration B2B</h3>
                <p style="color: #94a3b8;">Connectez les entreprises de votre parc : √©change de ressources, marketplace de d√©chets, et partage de services.</p>
            </div>
            <div class="dt-card">
                <div class="dt-icon">üèôÔ∏è</div>
                <h3>Gestion Globale</h3>
                <p style="color: #94a3b8;">Une vue centralis√©e pour la maintenance, la s√©curit√©, la mobilit√© douce et le bien-√™tre des employ√©s.</p>
            </div>
        </div>

        <div class="dt-footer">
            &copy; 2023 DigitalTwinCollab - L'innovation au service des territoires.
        </div>
    </section>


    <!-- ==================== VUE 2 : APPLICATION NOVAPARC ==================== -->
    <div id="app-view">
        <header>
            <div class="logo" onclick="exitApp()" title="Retour √† l'accueil">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2ecc71" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                NOVAPARC <span>DIGITAL TWIN</span>
            </div>
            <div class="user-profile" onclick="openModal('profile')">
                <div class="user-info-desktop">
                    <div style="font-weight: bold;">Admin Parc</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">Vue Globale</div>
                </div>
                <div class="avatar">AD</div>
            </div>
        </header>

        <nav>
            <ul class="nav-links">
                <li class="active" onclick="switchTab('dashboard', this)">Vue Globale</li>
                <li onclick="switchTab('energy', this)">√ânergie & Carbone</li>
                <li onclick="switchTab('kpi', this)">KPI & ROI</li>
                <li onclick="switchTab('circular', this)">√âconomie Circulaire</li>
                <li onclick="switchTab('partnerships', this)">Partenariats & Avantages</li>
                <li onclick="switchTab('mobility', this)">Mobilit√© Douce</li>
                <li onclick="switchTab('food', this)">Cantine & Potager</li>
                <li onclick="switchTab('community', this)">Communaut√© B2B</li>
            </ul>
        </nav>

        <main>
            <!-- ==================== VUE GLOBALE (DASHBOARD) ==================== -->
            <section id="dashboard" class="view-section active grid-dashboard">
                <div class="card" style="border-top: 4px solid var(--primary-green);">
                    <h3>Performance √ânerg√©tique <span class="card-icon">‚ö°</span></h3>
                    <div class="energy-big-number" style="color: var(--primary-green);">92%</div>
                    <p style="color: #7f8c8d;">Efficacit√© globale du parc</p>
                    <div style="margin-top: 15px; font-size: 0.9rem;">
                        <span style="color: var(--primary-green);">‚ñ≤ +5%</span> Production solaire vs hier
                    </div>
                    <button class="btn btn-outline" onclick="switchTab('energy', document.querySelectorAll('.nav-links li')[1])">Voir d√©tails</button>
                </div>

                <div class="card" style="border-top: 4px solid #f1c40f;">
                    <h3>Valorisation D√©chets <span class="card-icon">‚ôªÔ∏è</span></h3>
                    <div class="energy-big-number" style="color: #f39c12;">12.5 T</div>
                    <p style="color: #7f8c8d;">D√©tourn√©s de l'enfouissement ce mois</p>
                    <div class="waste-meter"><div class="waste-fill" style="width: 80%; background: #f1c40f;"></div></div>
                    <button class="btn btn-outline" style="border-color: #f1c40f; color: #f39c12;" onclick="switchTab('circular', document.querySelectorAll('.nav-links li')[3])">G√©rer les flux</button>
                </div>

                <div class="card" style="border-top: 4px solid var(--primary-blue);">
                    <h3>Mobilit√© Partag√©e <span class="card-icon">üö≤</span></h3>
                    <div style="display: flex; justify-content: space-between; margin-top: 10px; margin-bottom: 10px;">
                        <div style="text-align: center;">
                            <div style="font-weight: bold; font-size: 1.2rem;">18</div>
                            <div style="font-size: 0.8rem; color: #999;">V√©los Dispo</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold; font-size: 1.2rem;">5</div>
                            <div style="font-size: 0.8rem; color: #999;">Bornes Libres</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-weight: bold; font-size: 1.2rem;">3</div>
                            <div style="font-size: 0.8rem; color: #999;">Navettes/h</div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="openModal('transport')">R√©server un v√©hicule</button>
                </div>

                <div class="card" style="border-top: 4px solid #e74c3c;">
                    <h3>Alertes & Maintenance <span class="card-icon">üîß</span></h3>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="padding: 8px 0; border-bottom: 1px solid #eee; color: #e74c3c;">
                            <strong>‚ö†Ô∏è Fuite d'eau d√©tect√©e</strong> - Zone C (B√¢timent 4)
                        </li>
                        <li style="padding: 8px 0; color: #f39c12;">
                            <strong>‚ö†Ô∏è Maintenance Bornes</strong> - Pr√©vue demain 10h
                        </li>
                    </ul>
                    <button class="btn btn-danger" onclick="openModal('incident')">G√©rer les incidents</button>
                </div>
            </section>

            <!-- ==================== √âNERGIE & CARBONE ==================== -->
            <section id="energy" class="view-section grid-energy">
                <div class="card">
                    <h3>Pilotage √ânerg√©tique Temps R√©el <span class="card-icon">üìä</span></h3>
                    <div class="energy-stat-row">
                        <div>
                            <div class="energy-big-number">450 kW</div>
                            <div class="energy-label">Consommation</div>
                        </div>
                        <div>
                            <div class="energy-big-number" style="color: var(--primary-green);">120 kW</div>
                            <div class="energy-label">Production Solaire</div>
                        </div>
                        <div>
                            <div class="energy-big-number" style="color: #95a5a6;">330 kW</div>
                            <div class="energy-label">R√©seau (Net)</div>
                        </div>
                    </div>
                    <div class="graph-placeholder">
                        <div style="position: absolute; top: 10px; left: 10px; font-size: 0.8rem; color: #999;">kW</div>
                        <div style="width: 10%; height: 40%; background: var(--primary-blue); margin: 0 5px; border-radius: 4px 4px 0 0;"></div>
                        <div style="width: 10%; height: 55%; background: var(--primary-blue); margin: 0 5px; border-radius: 4px 4px 0 0;"></div>
                        <div style="width: 10%; height: 75%; background: var(--primary-blue); margin: 0 5px; border-radius: 4px 4px 0 0;"></div>
                        <div style="width: 10%; height: 60%; background: var(--primary-blue); margin: 0 5px; border-radius: 4px 4px 0 0;"></div>
                        <div style="width: 10%; height: 90%; background: var(--primary-blue); margin: 0 5px; border-radius: 4px 4px 0 0;"></div>
                        <div style="width: 10%; height: 50%; background: var(--primary-blue); margin: 0 5px; border-radius: 4px 4px 0 0; opacity: 0.5;"></div>
                        <div class="graph-line"></div>
                    </div>
                </div>

                <div style="display: flex; flex-direction: column; gap: 20px;">
                    <div class="card">
                        <h3>Empreinte Carbone <span class="card-icon">üå±</span></h3>
                        <div style="text-align: center; padding: 20px 0;">
                            <div style="font-size: 3rem; font-weight: bold; color: var(--dark-green);">12g</div>
                            <div style="color: #7f8c8d;">CO2eq / kWh (Moyenne Parc)</div>
                        </div>
                        <p style="font-size: 0.9rem; color: #666; text-align: center;">Excellent ! Vous √™tes 40% en dessous de la moyenne nationale.</p>
                    </div>

                    <div class="card" style="background: #e8f8f5; border: 1px solid var(--primary-green);">
                        <h3 style="color: var(--dark-green); border-bottom-color: rgba(46, 204, 113, 0.3);">Suggestions IA (Kaizen)</h3>
                        <ul style="font-size: 0.9rem; color: var(--navy-blue); padding-left: 20px;">
                            <li style="margin-bottom: 10px;">R√©duire CVC B√¢timent B de 1¬∞C (Gain estim√©: 400‚Ç¨/mois)</li>
                            <li>D√©caler la recharge des flottes √©lectriques √† 14h00 (Pic solaire)</li>
                        </ul>
                        <button class="btn btn-primary" style="background: var(--dark-green);" onclick="openModal('ai_optimize')">Appliquer Automatiquement</button>
                    </div>
                </div>
            </section>

            <!-- ==================== KPI & ROI ==================== -->
            <section id="kpi" class="view-section grid-kpi">
                <div class="card">
                    <h3>√âconomies Financi√®res (YTD) <span class="card-icon">üí∞</span></h3>
                    <div class="kpi-highlight">
                        <div style="font-size: 2.5rem;">üìâ</div>
                        <div>
                            <div class="kpi-value">48 250 ‚Ç¨</div>
                            <div class="kpi-sub">√âconomis√©s depuis le 1er Janvier</div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                            <span>Objectif Annuel (60k‚Ç¨)</span>
                            <span>80%</span>
                        </div>
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" style="width: 80%;"></div>
                        </div>
                    </div>

                    <h4 style="margin-top: 20px; font-size: 1rem; color: var(--navy-blue);">D√©tail par Poste</h4>
                    <table class="roi-table">
                        <thead>
                            <tr>
                                <th>Source</th>
                                <th>Gain (‚Ç¨)</th>
                                <th>% Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Panneaux Solaires</td>
                                <td class="roi-positive">+ 25 000 ‚Ç¨</td>
                                <td>52%</td>
                            </tr>
                            <tr>
                                <td>Optimisation CVC (IA)</td>
                                <td class="roi-positive">+ 12 500 ‚Ç¨</td>
                                <td>26%</td>
                            </tr>
                            <tr>
                                <td>√âclairage LED Intelligent</td>
                                <td class="roi-positive">+ 6 250 ‚Ç¨</td>
                                <td>13%</td>
                            </tr>
                            <tr>
                                <td>Revente Surplus R√©seau</td>
                                <td class="roi-positive">+ 4 500 ‚Ç¨</td>
                                <td>9%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card">
                    <h3>Comparatif Consommation (N vs N-1) <span class="card-icon">üìâ</span></h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">Comparaison de la consommation √©lectrique (MWh) par rapport √† l'ann√©e derni√®re.</p>
                    
                    <div class="bar-chart">
                        <div class="bar-group">
                            <div class="bar" style="height: 60%; background: #bdc3c7;"><span class="bar-value">60</span></div>
                            <div class="bar" style="height: 45%; background: var(--primary-green); margin-left: -10px; z-index: 2; opacity: 0.9;"><span class="bar-value" style="color:white;">45</span></div>
                            <div class="bar-label">Juin</div>
                        </div>
                        <div class="bar-group">
                            <div class="bar" style="height: 80%; background: #bdc3c7;"><span class="bar-value">80</span></div>
                            <div class="bar" style="height: 55%; background: var(--primary-green); margin-left: -10px; z-index: 2; opacity: 0.9;"><span class="bar-value" style="color:white;">55</span></div>
                            <div class="bar-label">Juil</div>
                        </div>
                        <div class="bar-group">
                            <div class="bar" style="height: 75%; background: #bdc3c7;"><span class="bar-value">75</span></div>
                            <div class="bar" style="height: 50%; background: var(--primary-green); margin-left: -10px; z-index: 2; opacity: 0.9;"><span class="bar-value" style="color:white;">50</span></div>
                            <div class="bar-label">Ao√ªt</div>
                        </div>
                        <div class="bar-group">
                            <div class="bar" style="height: 65%; background: #bdc3c7;"><span class="bar-value">65</span></div>
                            <div class="bar" style="height: 40%; background: var(--primary-green); margin-left: -10px; z-index: 2; opacity: 0.9;"><span class="bar-value" style="color:white;">40</span></div>
                            <div class="bar-label">Sept</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; display: flex; justify-content: center; gap: 20px; font-size: 0.8rem;">
                        <div style="display: flex; align-items: center; gap: 5px;"><div style="width: 10px; height: 10px; background: #bdc3c7;"></div> Ann√©e N-1</div>
                        <div style="display: flex; align-items: center; gap: 5px;"><div style="width: 10px; height: 10px; background: var(--primary-green);"></div> Ann√©e N (Actuelle)</div>
                    </div>

                    <div style="margin-top: 20px; background: #e8f8f5; padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-weight: bold; color: var(--dark-green);">-28% de consommation moyenne</div>
                        <div style="font-size: 0.8rem; color: #666;">Gr√¢ce √† l'isolation et au pilotage intelligent.</div>
                    </div>
                </div>
            </section>

            <!-- ==================== √âCONOMIE CIRCULAIRE ==================== -->
            <section id="circular" class="view-section grid-circular">
                <div class="card" style="grid-column: span 2;">
                    <h3>Marketplace Inter-Entreprises <span class="card-icon">ü§ù</span></h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <input type="text" placeholder="Rechercher une ressource (ex: palettes, chaleur...)" style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                        <button class="btn btn-primary" style="width: auto; margin-top: 0;" onclick="openModal('search')">Chercher</button>
                    </div>
                    
                    <div class="listing-item">
                        <div>
                            <div style="font-weight: bold;">Palettes Europe (Standard)</div>
                            <div style="font-size: 0.8rem; color: #666;">Dispo: 50 unit√©s ‚Ä¢ Entreprise: LogiTrans</div>
                        </div>
                        <span class="listing-tag tag-give">Don</span>
                    </div>
                    <div class="listing-item">
                        <div>
                            <div style="font-weight: bold;">Chutes de Cuir Industriel</div>
                            <div style="font-size: 0.8rem; color: #666;">Dispo: 200 kg ‚Ä¢ Entreprise: LuxeFab</div>
                        </div>
                        <span class="listing-tag tag-sell">0.50‚Ç¨ / kg</span>
                    </div>
                    <button class="btn btn-outline" style="margin-top: 20px;" onclick="openModal('publish_ad')">+ Publier une annonce</button>
                </div>

                <div class="card">
                    <h3>Mes Statistiques D√©chets <span class="card-icon">üìà</span></h3>
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 5px;">
                            <span>Plastique</span> <span>85% Recycl√©</span>
                        </div>
                        <div class="waste-meter"><div class="waste-fill" style="width: 85%;"></div></div>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 5px;">
                            <span>Carton/Papier</span> <span>98% Recycl√©</span>
                        </div>
                        <div class="waste-meter"><div class="waste-fill" style="width: 98%; background: var(--primary-green);"></div></div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.8rem; color: #666;">√âconomies g√©n√©r√©es (YTD)</div>
                        <div style="font-size: 1.5rem; font-weight: bold; color: var(--navy-blue);">4,250 ‚Ç¨</div>
                    </div>
                </div>
            </section>

            <!-- ==================== PARTENARIATS & AVANTAGES ==================== -->
            <section id="partnerships" class="view-section grid-circular">
                <div class="card" style="grid-column: span 2;">
                    <h3>Offres Inter-Entreprises (B2B) <span class="card-icon">ü§ù</span></h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 20px;">Profitez de tarifs n√©goci√©s entre voisins du parc.</p>
                    
                    <!-- B2B Coupon 1 -->
                    <div class="coupon-card">
                        <div class="discount-badge">-20%</div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold; color: var(--navy-blue);">Audit Cybers√©curit√©</div>
                            <div style="font-size: 0.85rem; color: #666;">Propos√© par : <strong>SecureTech (B√¢timent C)</strong></div>
                            <div style="font-size: 0.8rem; color: #999; margin-top: 5px;">Valable pour toute premi√®re commande.</div>
                        </div>
                        <button class="btn btn-outline" style="width: auto; padding: 5px 15px;" onclick="openModal('code_cyber')">Voir Code</button>
                    </div>

                    <!-- B2B Coupon 2 -->
                    <div class="coupon-card">
                        <div class="discount-badge" style="background: var(--primary-green);">GRATUIT</div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold; color: var(--navy-blue);">1 Mois de Nettoyage Industriel</div>
                            <div style="font-size: 0.85rem; color: #666;">Propos√© par : <strong>CleanPro (B√¢timent A)</strong></div>
                            <div style="font-size: 0.8rem; color: #999; margin-top: 5px;">Pour tout contrat annuel sign√© avant d√©cembre.</div>
                        </div>
                        <button class="btn btn-outline" style="width: auto; padding: 5px 15px; border-color: var(--primary-green); color: var(--primary-green);" onclick="openModal('code_clean')">Voir Code</button>
                    </div>

                    <!-- B2B Coupon 3 -->
                    <div class="coupon-card">
                        <div class="discount-badge" style="background: var(--navy-blue);">-15%</div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold; color: var(--navy-blue);">Impression Grand Format</div>
                            <div style="font-size: 0.85rem; color: #666;">Propos√© par : <strong>PrintCorp (B√¢timent F)</strong></div>
                            <div style="font-size: 0.8rem; color: #999; margin-top: 5px;">Sur toute la signal√©tique √©v√©nementielle.</div>
                        </div>
                        <button class="btn btn-outline" style="width: auto; padding: 5px 15px; border-color: var(--navy-blue); color: var(--navy-blue);" onclick="openModal('code_print')">Voir Code</button>
                    </div>
                </div>

                <div class="card">
                    <h3>Cadeaux & Avantages Salari√©s <span class="card-icon">üéÅ</span></h3>
                    <p style="color: #666; font-size: 0.9rem; margin-bottom: 15px;">Pour vos employ√©s.</p>

                    <!-- Gift 1 -->
                    <div class="gift-card-visual">
                        <div style="font-weight: bold; font-size: 1.2rem;">Caf√© Offert ‚òï</div>
                        <div style="font-size: 0.9rem; opacity: 0.9;">√Ä la cantine centrale</div>
                        <div style="font-size: 0.8rem; margin-top: 10px; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 4px; display: inline-block;">Il reste 2 jours</div>
                        <button style="margin-top: 15px; width: 100%; background: white; color: var(--purple); border: none; padding: 8px; border-radius: 4px; cursor: pointer; font-weight: bold;" onclick="openModal('claim_gift')">Activer le cadeau</button>
                    </div>

                    <!-- Gift 2 -->
                    <div style="border: 1px solid #eee; padding: 15px; border-radius: 8px; margin-bottom: 10px;">
                        <div style="font-weight: bold; color: var(--navy-blue);">Salle de Sport "FitParc"</div>
                        <div style="font-size: 0.9rem; color: var(--primary-green); font-weight: bold;">-50% sur l'abonnement</div>
                        <div style="font-size: 0.8rem; color: #999; margin-top: 5px;">R√©serv√© aux employ√©s du parc.</div>
                        <button class="btn btn-purple" style="margin-top: 10px; font-size: 0.8rem; padding: 5px;" onclick="openModal('gym_code')">Obtenir le pass</button>
                    </div>
                    
                    <div style="margin-top: 15px; background: #f0f8ff; padding: 10px; border-radius: 6px; font-size: 0.85rem; text-align: center; color: var(--dark-blue);">
                        ü§ù <strong>Parrainage :</strong> Recommandez un client √† une entreprise du parc et gagnez des cr√©dits carbone !
                    </div>
                </div>
            </section>

            <!-- ==================== MOBILIT√â DOUCE ==================== -->
            <section id="mobility" class="view-section grid-energy">
                <div class="card">
                    <h3>Carte du Parc & V√©hicules <span class="card-icon">üìç</span></h3>
                    <div class="map-full">
                        <div style="position: absolute; top: 40%; left: 30%; width: 15px; height: 15px; background: var(--primary-green); border-radius: 50%; border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3); cursor: pointer;" title="V√©lo #12" onclick="openModal('transport')"></div>
                        <div style="position: absolute; top: 60%; left: 70%; width: 15px; height: 15px; background: var(--primary-blue); border-radius: 50%; border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3); cursor: pointer;" title="Trottinette #05" onclick="openModal('transport')"></div>
                        <div style="position: absolute; top: 20%; left: 50%; width: 20px; height: 20px; background: #e67e22; border-radius: 4px; border: 2px solid white; box-shadow: 0 0 5px rgba(0,0,0,0.3); display: flex; justify-content: center; align-items: center; color: white; font-size: 10px; font-weight: bold;" title="Station de Charge">‚ö°</div>
                        <div style="position: absolute; bottom: 20px; left: 20px; background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
                            <div style="font-size: 0.8rem;">üü¢ V√©los üîµ Trottinettes üü† Bornes</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>R√©server un trajet <span class="card-icon">üì±</span></h3>
                    <div class="transport-mode" onclick="openModal('transport')">
                        <div style="font-size: 1.5rem;">üö≤</div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold;">V√©lo √âlectrique</div>
                            <div style="font-size: 0.8rem; color: #666;">Le plus proche: 2 min √† pied</div>
                        </div>
                        <div class="battery-level"><div class="battery-fill" style="width: 80%;"></div></div>
                    </div>
                    <div class="transport-mode" onclick="openModal('transport')">
                        <div style="font-size: 1.5rem;">üõ¥</div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold;">Trottinette</div>
                            <div style="font-size: 0.8rem; color: #666;">Le plus proche: 5 min √† pied</div>
                        </div>
                        <div class="battery-level"><div class="battery-fill" style="width: 40%; background: #f39c12;"></div></div>
                    </div>
                    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
                    <h4>Covoiturage Inter-Parc</h4>
                    <div style="margin-top: 10px; font-size: 0.9rem; padding: 10px; background: #f0f8ff; border-left: 3px solid var(--primary-blue); border-radius: 4px;">
                        <strong>Beauvais Centre ‚ûî NOVAPARC</strong><br>
                        D√©part 17h30 ‚Ä¢ Martin D. (3 places)
                    </div>
                    <button class="btn btn-primary" onclick="openModal('carpool')">R√©server ma place</button>
                </div>
            </section>

            <!-- ==================== CANTINE & POTAGER ==================== -->
            <section id="food" class="view-section grid-energy">
                <div class="card">
                    <h3>Cantine Connect√©e <span class="card-icon">ü•ó</span></h3>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; background: #f9f9f9; padding: 10px; border-radius: 6px;">
                        <div>
                            <div style="font-weight: bold; color: var(--navy-blue);">Affluence Actuelle</div>
                            <div style="font-size: 0.8rem; color: var(--primary-green);">Faible (Pas d'attente)</div>
                        </div>
                        <div style="font-size: 1.5rem;">üü¢</div>
                    </div>

                    <div class="menu-card">
                        <div class="menu-img">üç≤</div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold;">Plat du Jour : Risotto aux Champignons</div>
                            <div style="font-size: 0.8rem; color: #666;">Champignons du potager NOVAPARC ‚Ä¢ Riz Bio</div>
                            <div style="font-size: 0.8rem; color: var(--primary-green); margin-top: 5px;">Empreinte Carbone: Tr√®s Faible (0.4kg CO2)</div>
                        </div>
                        <button class="btn btn-primary" style="width: auto;" onclick="openModal('food_order')">R√©server</button>
                    </div>

                    <div class="menu-card">
                        <div class="menu-img">üç∞</div>
                        <div style="flex: 1;">
                            <div style="font-weight: bold;">Dessert : Tarte aux Pommes</div>
                            <div style="font-size: 0.8rem; color: #666;">Pommes du verger local</div>
                        </div>
                        <button class="btn btn-primary" style="width: auto;" onclick="openModal('food_order')">R√©server</button>
                    </div>
                </div>

                <div class="card">
                    <h3>Potager Connect√© (IoT) <span class="card-icon">ü•ï</span></h3>
                    <p style="font-size: 0.9rem; color: #666;">Donn√©es en temps r√©el des serres du parc.</p>
                    
                    <div class="sensor-grid">
                        <div class="sensor-box">
                            <div style="font-size: 0.8rem; color: #7f8c8d;">Humidit√© Sol</div>
                            <div class="sensor-val" style="color: var(--primary-blue);">42%</div>
                            <div style="font-size: 0.7rem;">Optimal</div>
                        </div>
                        <div class="sensor-box">
                            <div style="font-size: 0.8rem; color: #7f8c8d;">Temp√©rature</div>
                            <div class="sensor-val" style="color: var(--accent-orange);">22¬∞C</div>
                            <div style="font-size: 0.7rem;">Serre A</div>
                        </div>
                        <div class="sensor-box">
                            <div style="font-size: 0.8rem; color: #7f8c8d;">R√©servoir Eau</div>
                            <div class="sensor-val" style="color: var(--dark-blue);">85%</div>
                            <div style="font-size: 0.7rem;">Eau de Pluie</div>
                        </div>
                        <div class="sensor-box">
                            <div style="font-size: 0.8rem; color: #7f8c8d;">R√©colte Pr√©vue</div>
                            <div class="sensor-val" style="color: var(--primary-green);">J-2</div>
                            <div style="font-size: 0.7rem;">Tomates</div>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 10px; background: #e8f8f5; border-radius: 6px; font-size: 0.9rem;">
                        <strong>‚ôªÔ∏è Boucle Ferm√©e :</strong> Le compost de la cantine a fertilis√© ce sol hier.
                    </div>
                    <button class="btn btn-outline" style="margin-top: 15px;" onclick="openModal('garden_cam')">Voir Cam√©ra Serre</button>
                </div>
            </section>

            <!-- ==================== COMMUNAUT√â B2B ==================== -->
            <section id="community" class="view-section grid-circular">
                <div class="card" style="grid-column: span 2;">
                    <h3>Actualit√©s & √âv√©nements <span class="card-icon">üì∞</span></h3>
                    <div class="news-feed">
                        <div class="news-item">
                            <div class="news-date">
                                <div style="font-size: 1.2rem;">14</div>
                                <div style="font-size: 0.8rem; text-transform: uppercase;">Oct</div>
                            </div>
                            <div>
                                <h4 style="color: var(--navy-blue);">Inauguration de la nouvelle chaufferie biomasse</h4>
                                <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">Rejoignez-nous pour la visite technique.</p>
                                <div style="margin-top: 5px; font-size: 0.8rem; color: var(--primary-blue);">14:00 - 16:00 ‚Ä¢ Hall A</div>
                            </div>
                        </div>
                        <div class="news-item">
                            <div class="news-date">
                                <div style="font-size: 1.2rem;">18</div>
                                <div style="font-size: 0.8rem; text-transform: uppercase;">Oct</div>
                            </div>
                            <div>
                                <h4 style="color: var(--navy-blue);">Atelier RSE : "Optimiser sa fiscalit√© verte"</h4>
                                <p style="font-size: 0.9rem; color: #666;">Anim√© par le cabinet Deloitte.</p>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-outline" onclick="openModal('calendar')">Voir le calendrier complet</button>
                </div>

                <div class="card">
                    <h3>Mobilit√© RH & Services <span class="card-icon">üíº</span></h3>
                    <h4 style="font-size: 0.9rem; color: #999; margin-bottom: 10px; text-transform: uppercase;">Opportunit√©s Internes</h4>
                    <div class="job-card">
                        <div style="font-weight: bold; font-size: 0.95rem;">Responsable Qualit√©</div>
                        <div style="font-size: 0.85rem; color: #666;">AgriTech Solutions ‚Ä¢ CDI</div>
                        <div style="font-size: 0.8rem; color: var(--primary-blue); margin-top: 5px; cursor: pointer;" onclick="openModal('job_apply')">Voir l'offre ‚Üí</div>
                    </div>
                    <div class="job-card" style="border-left-color: var(--primary-green);">
                        <div style="font-weight: bold; font-size: 0.95rem;">Technicien de Maintenance</div>
                        <div style="font-size: 0.85rem; color: #666;">Poste Partag√© (3 entreprises)</div>
                        <div style="font-size: 0.8rem; color: var(--primary-green); margin-top: 5px; cursor: pointer;" onclick="openModal('job_apply')">Voir l'offre ‚Üí</div>
                    </div>
                    <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee;">
                    <h4 style="font-size: 0.9rem; color: #999; margin-bottom: 10px; text-transform: uppercase;">Services Mutualis√©s</h4>
                    <button class="btn btn-outline" style="font-size: 0.9rem; padding: 8px; margin-bottom: 5px;" onclick="openModal('room_booking')">üè¢ R√©server Salle Conf√©rence</button>
                    <button class="btn btn-outline" style="font-size: 0.9rem; padding: 8px;" onclick="openModal('legal_help')">‚öñÔ∏è Consultation Juridique</button>
                </div>
            </section>
        </main>
    </div>

    <!-- MODAL OVERLAY -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div id="modal-header" class="modal-header">Titre</div>
            <div id="modal-body" class="modal-body">Contenu...</div>
            <div class="modal-actions">
                <button class="modal-btn modal-btn-close" onclick="closeModal()">Fermer</button>
                <button class="modal-btn modal-btn-confirm" onclick="closeModal()">Confirmer</button>
            </div>
        </div>
    </div>

    <script>
        // --- GESTION DE L'AFFICHAGE (Landing vs App) ---
        function enterApp() {
            document.getElementById('presentation-view').style.display = 'none';
            document.getElementById('app-view').style.display = 'flex';
        }

        function exitApp() {
            document.getElementById('presentation-view').style.display = 'flex';
            document.getElementById('app-view').style.display = 'none';
        }

        // --- LOGIQUE DE L'APP (Existante) ---

        // Navigation Logic
        function switchTab(tabId, navElement) {
            document.querySelectorAll('.view-section').forEach(section => section.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            document.querySelectorAll('.nav-links li').forEach(li => li.classList.remove('active'));
            navElement.classList.add('active');
        }

        // Modal Logic
        const modalOverlay = document.getElementById('modal-overlay');
        const modalHeader = document.getElementById('modal-header');
        const modalBody = document.getElementById('modal-body');

        function openModal(type) {
            modalOverlay.style.display = 'flex';
            
            switch(type) {
                // --- PARTNERSHIP MODALS ---
                case 'code_cyber':
                    modalHeader.innerText = "Code Promo : SecureTech";
                    modalBody.innerHTML = "<div style='text-align:center;'><p>Pr√©sentez ce code lors de votre devis :</p><h2 style='background:#eee; padding:10px; border-radius:6px; margin:10px 0; letter-spacing:2px; color:var(--primary-blue);'>SECURE20</h2><p style='font-size:0.8rem; color:#666;'>Valable jusqu'au 31/12</p></div>";
                    break;
                case 'code_clean':
                    modalHeader.innerText = "Offre : CleanPro";
                    modalBody.innerHTML = "<div style='text-align:center;'><p>Code d'activation :</p><h2 style='background:#eee; padding:10px; border-radius:6px; margin:10px 0; letter-spacing:2px; color:var(--primary-green);'>CLEANSTART</h2></div>";
                    break;
                case 'code_print':
                    modalHeader.innerText = "Code Promo : PrintCorp";
                    modalBody.innerHTML = "<div style='text-align:center;'><h2 style='background:#eee; padding:10px; border-radius:6px; margin:10px 0; letter-spacing:2px; color:var(--navy-blue);'>PRINTB2B</h2></div>";
                    break;
                case 'claim_gift':
                    modalHeader.innerText = "Cadeau Activ√© ! ‚òï";
                    modalBody.innerHTML = "<div style='text-align:center;'><p>Montrez cet √©cran √† la caisse de la cantine.</p><div style='width:150px; height:150px; background:#333; margin:20px auto; display:flex; align-items:center; justify-content:center; color:white;'>[QR CODE]</div></div>";
                    break;
                case 'gym_code':
                    modalHeader.innerText = "Pass Sport FitParc";
                    modalBody.innerHTML = "<p>Pour b√©n√©ficier de -50%, inscrivez-vous avec votre email professionnel (@votre-entreprise.com) sur le site de FitParc ou pr√©sentez votre badge √† l'accueil.</p>";
                    break;

                // --- EXISTING MODALS ---
                case 'profile':
                    modalHeader.innerText = "Profil Utilisateur";
                    modalBody.innerHTML = "<p><strong>Nom:</strong> Admin Parc<br><strong>R√¥le:</strong> Gestionnaire<br><strong>Email:</strong> admin@novaparc.com</p><button class='btn btn-danger' onclick='exitApp(); closeModal();'>Se d√©connecter</button>";
                    break;
                case 'incident':
                    modalHeader.innerText = "Signaler / G√©rer un Incident";
                    modalBody.innerHTML = "<p>S√©lectionnez le type d'incident :</p><select style='width:100%; padding:8px; margin-top:10px;'><option>Fuite d'eau</option><option>Panne √âlectrique</option><option>D√©gradations</option></select><br><br><textarea style='width:100%; height:80px; padding:8px;' placeholder='Description...'></textarea>";
                    break;
                case 'ai_optimize':
                    modalHeader.innerText = "Optimisation IA";
                    modalBody.innerText = "L'algorithme va ajuster la CVC du B√¢timent B et planifier la charge des v√©hicules. √âconomie estim√©e : 15‚Ç¨ aujourd'hui. Confirmer ?";
                    break;
                case 'publish_ad':
                    modalHeader.innerText = "Publier une annonce";
                    modalBody.innerHTML = "<input type='text' placeholder='Titre (ex: Palettes)' style='width:100%; padding:8px; margin-bottom:10px;'><input type='number' placeholder='Quantit√©' style='width:100%; padding:8px; margin-bottom:10px;'><select style='width:100%; padding:8px;'><option>Don</option><option>Vente</option></select>";
                    break;
                case 'search':
                    modalHeader.innerText = "Recherche Marketplace";
                    modalBody.innerText = "Recherche en cours dans la base de donn√©es des 50 entreprises du parc...";
                    break;
                case 'transport':
                    modalHeader.innerText = "D√©verrouiller un v√©hicule";
                    modalBody.innerText = "Approchez votre t√©l√©phone de la borne ou confirmez la r√©servation √† distance pour le v√©lo #12.";
                    break;
                case 'carpool':
                    modalHeader.innerText = "Covoiturage";
                    modalBody.innerText = "Vous allez envoyer une demande √† Martin D. pour le trajet de 17h30. Il recevra une notification.";
                    break;
                case 'food_order':
                    modalHeader.innerText = "R√©server votre repas";
                    modalBody.innerText = "Votre commande sera pr√™te au guichet 'Click & Collect' √† 12h30. Montant: 8.50‚Ç¨ (d√©duit du solde).";
                    break;
                case 'garden_cam':
                    modalHeader.innerText = "Cam√©ra Serre A";
                    modalBody.innerHTML = "<div style='width:100%; height:200px; background:#000; color:white; display:flex; align-items:center; justify-content:center;'>[Flux Vid√©o En Direct]</div>";
                    break;
                case 'room_booking':
                    modalHeader.innerText = "R√©server Salle de Conf√©rence";
                    modalBody.innerHTML = "<input type='date' style='width:100%; padding:8px; margin-bottom:10px;'><select style='width:100%; padding:8px;'><option>09:00 - 10:00</option><option>10:00 - 11:00</option></select>";
                    break;
                case 'legal_help':
                    modalHeader.innerText = "Consultation Juridique";
                    modalBody.innerText = "Prochain cr√©neau disponible : Jeudi 14h avec Ma√Ætre Dupont (Droit des affaires).";
                    break;
                case 'job_apply':
                    modalHeader.innerText = "Postuler";
                    modalBody.innerText = "Votre profil LinkedIn et CV seront envoy√©s aux RH de l'entreprise concern√©e.";
                    break;
                case 'calendar':
                    modalHeader.innerText = "Calendrier Complet";
                    modalBody.innerText = "Chargement du calendrier partag√© Outlook/Google...";
                    break;
                default:
                    modalHeader.innerText = "Information";
                    modalBody.innerText = "Action en cours de traitement...";
            }
        }

        function closeModal() {
            modalOverlay.style.display = 'none';
        }

        // Close modal if clicking outside content
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) closeModal();
        });
    </script>
</body>
</html>
